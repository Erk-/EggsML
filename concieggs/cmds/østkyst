#!/usr/bin/env bash
#
# Hør første vers af den nye sang fra østkyst hustlers

if [ $# = 0 ]; then
    echo "$EGGS_USER: Hør hvad en politiker mener om et emne (på Guds eget sprog)"
    exit
fi

songname=$@

prompt="Her er de første par linjer fra sangen \"Han får for lidt\":\nHan spejler sig i spejlet\nFor hans spejl er hans ven\nHan kender hud og kinder\nUd og ind og ud igen\nHan holder ormegården nede\nSætter bumser under pres\nOg med pincet er det let\nAt holde brynene på plads\nOg skægget står totalt\nSom var det målt med lineal\n\nHer er de første par linjer fra sangen \"Hustlerstil\":\nJeg var en drengerøv, det var stilen engang\nDem jeg kendte kørte den hårdt når vi hang\nMen da de andre fik travlt kørte jeg stilen endnu\nJeg så dem blive gamle så hurtigt de ku'\nOg de fik glasbord og vinrack og gusten hud\nDe sugede kinderne ind og så bekymrede ud\nOg de har ret, jeg passer ikke længere nogen steder hen\nDe har ret i hvad de siger har de, men\nDe sku' ha' hørt på et beat\n\nHer er de første par linjer fra sangen \"Sorgenfri-rap\":\nVi var i Sorgenfri, med cola, chips og tobak\nVi chillede hårdt, spillede kort og kølede kinaskak\nVi befandt os i en sandt at sige meget sumpet tilstand\nDet var Tigeren, Jan og Peyk, det var mig og Jesper Wildmand.\nTiden var gået, jeg havde fået mig en voldsom appetit\nOg jeg vil' gi' min højre arm for en Whopper med pomfrit'.\nEfter kort tids MC Einar argumentation\nVar vi på vej ned imod Sorgenfri station\nDet var fedt, det var varmt, solen den var sund\nOg Jesper Wildmand lavede mærkelige lyde med sin mund.\n\nHer er de første par linjer fra sangen \"Penge ind på torsdag\":\nDu ved jeg er for lav til fine fester, for høj til at ryge hash og\nJeg er for impulsiv til vaner, for vandt til faste pladser\nJeg er for fattig til en taxa, for rig til at rulle smøger selv\nFor klog til at ryge dem, men jeg gør det sgu alligevel\nFor rød til kommunisme, for grøn til vegetarer\nIkke for hvid til at være blå, men jeg er for sort til at kunne forklare\nJeg er for træt til at drikke kaffe, for dansk til at drikke te\nMen på torsdag får jeg løn, så hvad gør det?\n\nHer er de første par linjer fra sangen \"$songname\":\n"

answer=$(gpt3 200 "$prompt" | sed 's/\\n\\n*//')

if [ "$answer" ]; then
    echo "$EGGS_USER: Her er de første par linjer fra sangen \"$songname\":
$answer"
else
    echo "$EGGS_USER: Beklager, kunne ikke finde den efterspurgte sang"
fi
